## RepoSearch
### Description

RepoSearch is a tool for searching through repositories of source code using natural language queries, based on OpenAI's embeddings.

> **Note**: Using this project requires you to supply your own OpenAI API key (set environment variable `OPENAI_API_KEY=sk-...`)
>
> **Costs**: Cost per query is negligible, almost always less than 1/10th of a penny unless you're writing paragraphs of text. Generating embeddings for the [OpenMW](https://www.gitlab.com) repository costs about ***TODO** USD.

### How does it work?
For each file in the repository, a query is sent to the [OpenAI embeddings API](https://platform.openai.com/docs/api-reference/embeddings) to generate an embedding. If a file is too large for a single query, it is split into smaller chunks and each chunk is embedded separately.

The retrieved embeddings are stored in a [HuggingFace Datasets](https://huggingface.co/docs/datasets/index) dataset, which can be used by code outside of this project. Check out [the schema](#dataset-schema) for more information about using the generated dataset.

The embeddings are indexed using [FAISS](https://faiss.ai/), which allows for fast nearest neighbor searches to your queries.

### Example Usage

```bash
$ ./repoSearch.sh generate openmw https://gitlab.com/OpenMW/openmw
$ ./repoSearch.sh query openmw "How do I make an NPC navigate to a destination?"

***TODO: Actual output from program***
```

### Usage

1. Clone the repository.
2. Run `repoSearch.sh init` to install dependencies.
    * **Note**: Use `repoSearch.sh clean` to remove all files generated by the script.
3. Run `repoSearch.sh generate [dataset name] [url or local path]` to generate an embeddings dataset for the repository.
4. Run `repoSearch.sh query [dataset name] [query]` to query the dataset for the most relevant files.

### Dataset Schema
*TODO* once everything is working